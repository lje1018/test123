{"componentChunkName":"component---src-templates-weekly-pick-post-tsx","path":"/weekly-pick/ko_20190522","result":{"data":{"post":{"html":"<h1 id=\"크롬-네이티브-레이지-로딩\" style=\"position:relative;\"><a href=\"#%ED%81%AC%EB%A1%AC-%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C-%EB%A0%88%EC%9D%B4%EC%A7%80-%EB%A1%9C%EB%94%A9\" aria-label=\"크롬 네이티브 레이지 로딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>크롬 네이티브 레이지 로딩</h1>\n<h2 id=\"레이지-로딩이란\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%9D%B4%EC%A7%80-%EB%A1%9C%EB%94%A9%EC%9D%B4%EB%9E%80\" aria-label=\"레이지 로딩이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레이지 로딩이란?</h2>\n<p>좋은 기회로 2019년 구글I/O에 참석했다. 웹 기술 세션 중에는 크게 눈에 띄는 세션은 없었지만, 일부 세션에서 소개된 웹과 관련 기술 몇 가지는 흥미로웠다. Native Lazy Loading, Portals, Duplex, Rich Results 정도가 나의 관심을 끌었다. 그중 키노트에서 시작해 몇 개의 세션에서 두루두루 언급한 네이티브 레이지 로딩이 제일 기대됐다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/389021/57991186-3dd6cf00-7ae8-11e9-932f-47f02885e379.jpeg\" alt=\"관련 세션\"></p>\n<p>레이지 로딩, 특히 이미지 레이지 로딩은 새로운 기술은 아니다. 기존 브라우저는 웹페이지를 불러올 때 초기부터 전체 영역에 해당하는 이미지들을 동시에 모두 내려받는다. 서비스의 사용자는 웹페이지의 모든 이미지를 보지 못한 채 다른 웹페이지로 이동할 가능성이 있지만, 브라우저는 항상 모든 이미지를 미리 내려받는 낭비를 하는 것이다. 이미지 레이지 로딩은 초기 페이지 로딩에서 모든 이미지를 내려받지 않는다. 초기에는 브라우저 뷰포트에 보이는 영역의 이미지만 내려받고 나머지 이미지는 필요한 상황이거나 가능성이 큰 상황을 휴리스틱(heuristics)을 이용해 판단하고 이미지를 내려받는다. 즉 유저의 스크롤이나 기타 환경 요인들을 판단해 이미지를 선택적으로 내려받는다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/389021/58000861-fdda1100-7b14-11e9-8b65-9727cead16b0.jpeg\" alt=\"레이지 로딩\"> <img src=\"https://user-images.githubusercontent.com/389021/57991423-cd30b200-7ae9-11e9-8aa7-f7248c496e48.jpeg\" alt=\"뷰포트의 이미지만 로드\"></p>\n<p>레이지 로딩을 적용하면 불필요한 네트워크 비용을 줄일 뿐 아니라 성능, 메모리, 사용성 모든 면에서 유리해진다. 기존에는 레이지 로딩을 자바스크립트로 직접 구현하거나 라이브러리를 사용했다. 브라우저의 네이티브로 지원되는 레이지 로딩은 이미지를 내려받는 시점의 판단을 브라우저 내부에서 결정하기 때문에 자바스크립트보다는 많은 정보에 접근할 수 있을 것이고 더욱 정교한 휴리스틱을 사용할 것으로 예상된다. 반면 이런 판단에 개입할 수 있는 옵션은 제공되지 않을 것으로 보인다. 크롬은 75 버전부터 <code class=\"tui-language-text\">iframe</code> 과 <code class=\"tui-language-text\">img</code> 의 레이지 로딩을 네이티브로 지원할 예정이다.</p>\n<h2 id=\"새로운-속성-loading\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%86%8D%EC%84%B1-loading\" aria-label=\"새로운 속성 loading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 속성 <code class=\"tui-language-text\">loading</code></h2>\n<p><a href=\"https://docs.google.com/document/d/1e8ZbVyUwgIkQMvJma3kKUDg8UUkLRRdANStqKuOIvHg\">공식 레이지 로드 디자인 문서</a>에 따르면 레이지로딩은 <code class=\"tui-language-text\">&lt;img&gt;</code> 와 <code class=\"tui-language-text\">&lt;iframe&gt;</code> 엘리멘트에 추가되는 새로운 속성 <code class=\"tui-language-text\">loading</code> 으로 설정할 수 있다고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"tui-language-html\"><code class=\"tui-language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cat.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazy<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>some.html<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"tui-language-text\">loading</code> 속성으로 <code class=\"tui-language-text\">lazy</code> 값을 주면 해당 이미지나 아이프레임은 레이지 로딩된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"tui-language-html\"><code class=\"tui-language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cat.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>eager<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>some.html<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>eager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"tui-language-text\">eager</code> 값은 의도적으로 레이지 로딩을 사용하지 않고 기존 브라우저의 동작과 동일하게 페이지 로딩 시 이미지를 내려받는다. 상황에 따라서는 레이지 로딩이 필요하지 않을 수도 있다. 서비스 사용성에 레이지 로딩이 방해된다면 <code class=\"tui-language-text\">eager</code> 옵션을 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"tui-language-html\"><code class=\"tui-language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cat.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>auto<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cat.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><code class=\"tui-language-text\">auto</code> 는 <code class=\"tui-language-text\">loading</code> 속성의 디폴트 값으로 따로 속성을 지정하지 않으면 적용되는 값이다. 브라우저에게 레이지 로딩을 할지 말지에 대한 결정을 맡긴다.</p>\n<p>크롬은 세계에서 제일 많이 사용하고 있는 브라우저가 된 지 오래고 한국에서도 현재 53% 이상의 사용률로 제일 많이 사용되고 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/389021/57991949-d3745d80-7aec-11e9-8233-cfb92bc109f9.png\" alt=\"브라우저 사용율\"></p>\n<p>이 53%의 사용자를 고려해 미리 테스트해볼 필요가 있다. 특히 이미지에 민감한 서비스라면 정식 버전에 포함되기 전에 반드시 미리 사용성을 테스트해 보고 서비스에 맞는 적절한 대응이 필요하다. 보통은 문제 없을 것으로 예상되지만, 디폴트가 <code class=\"tui-language-text\">auto</code> 값이라는 점은 사용성에 의도치 않은 문제를 발생시킬 수 있다. 아직 레이지 로딩의 도입을 고려할 수 없는 서비스라면 적어도 이미지마다 <code class=\"tui-language-text\">loading</code> 의 값을 <code class=\"tui-language-text\">eager</code> 로 적용해 기존의 동작과 동일하게 유지할 필요가 있지 않나 생각한다. 물론 <code class=\"tui-language-text\">auto</code> 가 전혀 문제 없을 수도 있다.</p>\n<h2 id=\"기능-탐지-및-폴백\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%ED%83%90%EC%A7%80-%EB%B0%8F-%ED%8F%B4%EB%B0%B1\" aria-label=\"기능 탐지 및 폴백 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 탐지 및 폴백</h2>\n<p><a href=\"https://github.com/scott-little/lazyload\">LazyLoad Explainer</a> 문서를 살펴보면 레이지 로드를 지원하는 브라우저를 탐지하는 방법을 알 수 있다. 다른 기능 탐지와 비슷한데 이미지 엘리먼트의 인터페이스 HTMLImageElement의 프로토타입에 <code class=\"tui-language-text\">loading</code> 프로퍼티가 존재하는지 판단한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"tui-language-js\"><code class=\"tui-language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'loading'</span> <span class=\"token keyword\">in</span> <span class=\"token class-name\">HTMLImageElement</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"네이티브 레이지 로딩 지원함\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">else</span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"지원 안함\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"tui-language-text\">loading</code> 속성을 적용해 간단히 사용할 수 있고 서비스에 악영향을 줄 가능성이 적기 때문에 기존에 레이지 로딩을 사용하지 않던 서비스도 크롬에서는 레이지 로딩을 사용하고 다른 브라우저에서는 무시하더라도 충분히 효과는 있겠지만 레이지 로딩을 모든 브라우저에서 제공하고자 한다면 폴백으로 다른 라이브러리를 고려해볼 수 있다.(물론 직접 만들 수도 있다)</p>\n<p><img src=\"https://user-images.githubusercontent.com/389021/57999567-ccf7dd00-7b10-11e9-8f83-9ebce0a92386.jpeg\" alt=\"크로스브라우징\"></p>\n<p>구글 I/O의 <a href=\"https://www.youtube.com/watch?v=YJGCZCaIZkQ\">\"Speed at Scale\"</a> 세션에서는 폴백으로 <a href=\"https://github.com/aFarkas/lazysizes\">lazysizes</a>라는 라이브러리를 사용하는 예제 코드를 공개했다. 이미지의 코드는 가독성이 떨어져 <a href=\"https://addyosmani.com/blog/lazy-loading/\">Addy Osmani의 블로그</a>에서 동일한 코드를 복사해서 옮겨 왔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"tui-language-html\"><code class=\"tui-language-html\"><span class=\"token comment\">&lt;!-- Let's load this in-viewport image normally --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hero.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>..<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">&lt;!-- Let's lazy-load the rest of these images --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">data-src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>unicorn.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>..<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazyload<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">data-src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cats.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>..<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazyload<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">data-src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dogs.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>..<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazyload<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'loading'</span> <span class=\"token keyword\">in</span> <span class=\"token class-name\">HTMLImageElement</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> images <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"img.lazyload\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    images<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">img</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>async <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"https://cdnjs.cloudflare.com/ajax/libs/lazysizes/4.1.8/lazysizes.min.js\"</span><span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"tui-language-text\">lazysizes</code> 와 같은 라이브러리를 사용해보진 않았지만, 이미지 레이지 로딩 구현 코드들이 다 비슷하기 때문에 구현 내용을 추측할 수 있다. 초기에는 모든 <code class=\"tui-language-text\">&lt;img&gt;</code> 엘리먼트에 플레이스 홀더 이미지를 노출하고 <code class=\"tui-language-text\">data-src</code> 경로의 이미지를 적절한 상황에 내려받고 완료되면 이미지 엘리먼트의 소스로 변경하는 형태로 구현되었을 것이다. 폴백 예제의 구현 내용을 보면 초기에는 <code class=\"tui-language-text\">lazysizes</code> 를 사용하는 코드로 작업하고 기능탐지로 네이티브 레이지 로딩을 사용할 수 있다면 <code class=\"tui-language-text\">lazysizes</code> 에서 필요한 <code class=\"tui-language-text\">data-src</code> 를 모두 <code class=\"tui-language-text\">src</code> 로 바꿔 네이티브 레이지 로딩을 사용하도록 엘리먼트를 변경하고 있다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>귀국 후 <a href=\"https://addyosmani.com/blog/lazy-loading/\">Addy Osmani의 블로그</a>의 하단 내용을 따라서 크롬 카나리버전에서 테스트해봤다. 기능 탐지도 되고 <code class=\"tui-language-text\">Image</code> 객체의 <code class=\"tui-language-text\">loading</code> 값까지 확인할 수 있었지만, 정상적으로 레이지 로딩이 되지 않고 웹페이지 로딩 초기부터 모든 이미지를 내려받고 있다. 아직 개발 중인 기능이기에 정식 버전이나 더 나은 카나리버전에서는 정상 동작할 것으로 기대한다. 테스트해본 카나리버전은 <code class=\"tui-language-text\">76.0.3799.0</code> 이다.</p>\n<p>네이티브 레이지 로딩은 Webkit 엔진 개발자들도 긍정적으로 검토하고 있다는 카더라가 있고 파이어폭스는 곧 크롬과 동일한 스펙으로 적용될 예정이라고 <a href=\"https://www.zdnet.com/article/firefox-will-support-image-lazy-loading-for-new-tab-page/\">ZDNET</a> 의 기사로 올라왔다. 마이크로소프트의 Edge도 크로미엄 기반으로 개발되고 있으니 크롬에서 시작한 스펙이 자연스럽게 표준이 되고 있는 게 현실인 것 같다. 물론 좋은 기능이고 충분히 표준 스펙으로 고려할만한 기능이지만 작년에 읽었던 <a href=\"https://www.theverge.com/2018/1/4/16805216/google-chrome-only-sites-internet-explorer-6-web-standards\">\"Chrome is turning into the new Internet Explorer 6\"</a> 이란 아티클이 떠올랐다. 뭐 어떻게 되었던 좋은 스펙이 많이 개발되서 웹의 가능성이 더 열리고 나의 밥그릇의 가능성도 더 커졌으면 좋겠다.</p>","frontmatter":{"id":"ko_20190522","title":"크롬 네이티브 레이지 로딩","description":"좋은 기회로 2019년 구글I/O에 참석했다. 웹 기술 세션 중에는 크게 눈에 띄는 세션은 없었지만, 일부 세션에서 소개된 웹과 관련 기술 몇 가지는 흥미로웠다. Native Lazy Loading, Portals, Duplex, Rich Results 정도가 나의 관심을 끌었다. 그중 키노트에서 시작해 몇 개의 세션에서 두루두루 언급한 네이티브 레이지 로딩이 제일 기대됐다.","date":"2019.05.22","author":"김성호","tags":["browser"],"thumbnail":null}},"allProductsJson":{"edges":[{"node":{"id":"tui-chart","packageName":null,"name":"Chart","type":"application","description":"The Chart makes your data pop, and it is easy to use. It provides you with multiple charts like Bar, Column, Line, and more.","detailDesc":"Chart makes your data pop. Its numerous charts like Line, Bar, Pie, and more are easy to use, and you can export your data to excel or even as images.","link":"","logo":null}},{"node":{"id":"tui-editor","packageName":"@toast-ui/editor","name":"Editor","type":"application","description":"The Editor allows you to edit your Markdown documents using text or WYSIWYG and comes with Syntax Highlighting, Scroll-Sync, Live Preview, and Chart features.","detailDesc":"Editor allows you to interact with their Markdown documents through both text and WYSIWYG. With Syntax Highlighting, Scroll-Sync, Live Preview, Charts, and much more diverse features and UI, it takes your word processing to the next level.","link":"https://nhn.github.io/tui.editor/latest","logo":null}},{"node":{"id":"tui-grid","packageName":null,"name":"Grid","type":"application","description":"The Grid is a powerful library with features like data editing, filtering, sorting, and more, and can be used to customize the editor or the renderer to your desired format.","detailDesc":"Grid is a powerful grid library with data editing, filtering, sorting, pagination features, and more. Furthermore, you can customize the editor and the renderer to your desired format and visualize your data however you like.","link":"https://nhn.github.io/tui.grid/latest/","logo":null}},{"node":{"id":"tui-calendar","packageName":null,"name":"Calendar","type":"application","description":"The Calendar supports monthly, weekly, daily views and more, and you can create or edit your schedule with a simple dragging motion.","detailDesc":"Calendar provides monthly, weekly, multi-weekly, daily views, and more, as well as a basic pop-up UI you can use to add/edit/delete your schedules. You can manage your schedule simply by dragging the schedules around. Managing your calendar has never been easier.","link":"","logo":null}},{"node":{"id":"tui-image-editor","packageName":null,"name":"Image-editor","type":"application","description":"With the UI that is the perfect combination of simple and beautiful, the Image Editor is a Full-Featured one that is perfect for everyday use.","detailDesc":"With the UI that is the perfect combination of simple and beautiful, Image Editor is a Full-Featured image editor that provides you with editing, drawing, and typing capabilities as well as a collection of great image filters that you can apply all at once.","link":"https://nhn.github.io/tui.image-editor/latest/","logo":null}},{"node":{"id":"tui-app-loader","packageName":null,"name":"App Loader","type":"component","description":"AppLoader is a library that you can use to load or install a certain app on the mobile device.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-auto-complete","packageName":null,"name":"Auto Complete","type":"component","description":"AutoComplete component can suggest and even fill in the rest of the word and sentences given the inputted text.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-color-picker","packageName":null,"name":"Color Picker","type":"component","description":"ColorPicker is a simple and efficient color picker, true to its name.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-context-menu","packageName":null,"name":"Context Menu","type":"component","description":"ContextMenu displays the menu items that you can access via the right click.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-date-picker","packageName":null,"name":"Date Picker","type":"component","description":"DatePicker allows you to pick a date using a pop-up calendar.\n\n","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-pagination","packageName":null,"name":"Pagination","type":"component","description":"Pagination component can show you the current page within a multi-page document and also provides links for included pages.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-rolling","packageName":null,"name":"Rolling","type":"component","description":"Rolling is a slider component that lets you view multiple contents in a selected area.","detailDesc":"","link":"","logo":null}},{"node":{"id":"select-box","packageName":"@toast-ui/select-box","name":"Select Box","type":"component","description":"SelectBox is a dropdown list component that you can use to select multiple menus easily.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-time-picker","packageName":null,"name":"Time Picker","type":"component","description":"TimePicker component allows you to use the SelectBox or the SpinBox to select the time.","detailDesc":"","link":"","logo":null}},{"node":{"id":"tui-tree","packageName":null,"name":"Tree","type":"component","description":"Tree component displays the data structure of the hierarchy and allows you to view and edit the node names.","detailDesc":"","link":"","logo":null}},{"node":{"id":"@toast-ui/doc","packageName":null,"name":"TOAST UI Doc","type":"tool","description":"Documentation generator that creates the example page and the API document by parsing the JSDoc comments.","detailDesc":"","link":"https://github.com/nhn/toast-ui.doc","logo":null}},{"node":{"id":"tui-eslint-config","packageName":null,"name":"ESLint Config","type":"tool","description":"ESLint configuration used with TOAST UI products to help find and fix problems in JavaScript code.","detailDesc":"","link":"https://github.com/nhn/tui.eslint.config","logo":null}},{"node":{"id":"tui-release-notes","packageName":null,"name":"Release Note","type":"tool","description":"Github release note generator to automatically summarize and classify the updates based on the commit logs.","detailDesc":"","link":"https://github.com/nhn/toast-ui.release-notes","logo":null}},{"node":{"id":"toast","packageName":null,"name":"TOAST Cloud","type":"references","description":"references is TOAST Cloud","detailDesc":"","link":"https://www.toast.com/","logo":"https://uicdn.toast.com/toastui/img/toast-ui-bi-nhntoast.png"}},{"node":{"id":"toastfile","packageName":null,"name":"TOAST File","type":"references","description":"references is TOAST File","detailDesc":"","link":"https://file.toast.com/","logo":"https://uicdn.toast.com/toastui/img/toast-ui-bi-toastfile.png"}},{"node":{"id":"dooray","packageName":null,"name":"Dooray","type":"references","description":"references is Dooray","detailDesc":"","link":"https://dooray.com/home","logo":"https://uicdn.toast.com/toastui/img/toast-ui-bi-toastdooray.png"}},{"node":{"id":"ncp","packageName":null,"name":"NCP","type":"references","description":"references is NCP","detailDesc":"","link":"https://www.e-ncp.com/","logo":"https://uicdn.toast.com/toastui/img/toast-ui-bi-ncp.png"}}]}},"pageContext":{"id":"ko_20190522","lang":"ko"}},"staticQueryHashes":["2997033868","414700122","542722004"]}